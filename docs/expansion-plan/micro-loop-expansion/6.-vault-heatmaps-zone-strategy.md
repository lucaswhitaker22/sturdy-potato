# 6. "Vault Heatmaps" (Zone Strategy)

## "Vault Heatmaps" (Zone Strategy)

Vault Heatmaps makes “where do I dig?” a real choice.

It does this by adding per-zone **Static Intensity**.

Static trades reward for risk.

It overlays the Field and Lab rules in [2: The Mechanics](../../game-overview/2-the-mechanics/).

### 6.1 Design goals

* Make zone selection feel like strategy, not theme.
* Create a readable risk/reward tradeoff.
* Make the Global Feed feel “world-reactive”.
* Give high-level players a planning edge.

Non-goals:

* Do not hide core odds.
* Do not create a best-in-slot zone permanently.
* Do not let players “reroll” Static by relogging.
* Do not change base loot identity rules (rarity/condition/mint canon stays intact).

### 6.2 Where it lives (UI + state)

Vault Heatmaps lives in \[01] THE FIELD.

It is shown on the zone selector for every unlocked dig site.

Required UI:

* A per-zone heatmap chip: **Static Intensity**.
* Color + label (3 tiers):
  * `LOW` (cool)
  * `MED` (warm)
  * `HIGH` (hot)
* A tooltip showing the exact modifiers for that tier.
* On crate drops, the crate card stores a source line.
  * Example: `Source: The Sunken Mall / Static: HIGH`

Authority rules:

* Static tier is server-owned.
* Static updates on a fixed cadence (example: every `15m`).
* Crates store their source zone and source static tier at the time they were found.
* The Lab reads the crate’s stored metadata.

This prevents “zone swapping” exploits.

### 6.3 Static Intensity (data model)

Each zone has:

* `static_tier` in `{low, med, high}`
* `static_updated_at`

Each crate has:

* `source_zone_id`
* `source_static_tier`
* `found_at`

Static is global per server.

It is not per-player by default.

### 6.4 Effects (what Static changes)

Static affects two things:

1. Field crate drop chance.
2. Lab Stability for crates found in that zone.

It must not affect:

* Anomaly odds.
* Scrap payout per extraction.
* Lab rarity table per stage.
* Mint assignment logic.

#### Field: crate chance bonus (flat)

Let `p_crate` be the player’s current crate chance for an extraction attempt.

Add a flat bonus by zone static:

* LOW: `+0.0%`
* MED: `+1.0%`
* HIGH: `+2.0%`

Then clamp:

* `p_crate_final = min(p_crate + bonus, 95%)`

#### Lab: Stability penalty (flat)

Let `p_success` be the Sift success chance computed normally.

Apply a flat penalty based on the crate’s `source_static_tier`:

* LOW: `+0.0%`
* MED: `-2.5%`
* HIGH: `-5.0%`

Then clamp:

* `p_success_final = clamp(p_success + penalty, 1%, 100%)`

Stage 0 remains 100% success.

### 6.5 How Static is computed (recommended approach)

Static should feel like “the surface is noisy right now”.

Keep it simple and deterministic.

Recommended model:

* Each zone has a rolling `activity_score`.
* Activity comes from server-side events already emitted:
  * extraction attempts in that zone
  * crate drops in that zone
  * high-tier reveals sourced from that zone (optional weight)
* Every `15m`, map score to a tier using percentiles:
  * bottom 50% → LOW
  * next 35% → MED
  * top 15% → HIGH

This guarantees variety.

It avoids a static “best zone”.

### 6.6 Progression integration (Excavation)

#### Zone Survey (high-level Excavation)

High-level Excavators can **Survey** a zone.

Survey is a player-only mitigation tool.

It reduces the Lab penalty on crates they find during the buff.

Recommended unlock:

* Excavation level `70+` (tunable)

Recommended rules:

* Action: \[SURVEY] on a zone.
* Cooldown: `10m`.
* Duration: `5m`.
* Effect while active:
  * MED penalty becomes `-1.0%` (instead of `-2.5%`)
  * HIGH penalty becomes `-2.0%` (instead of `-5.0%`)
* Field crate bonus is unchanged.

This preserves the “hot zone = more crates” fantasy.

It lets skilled players shave some risk.

### 6.7 Appraisal mastery integration (“The Oracle”)

Appraisal level 99 grants **The Oracle** in canon.

Oracle should also unlock “Trend Sight” for zones.

Trend Sight:

* For each zone, show the top `N` “trending” item catalog IDs.
* Use a small “Forecast” panel under the heatmap chip.

Hard rules:

* Only Oracle can see exact catalog IDs.
* Non-Oracle players can see a vague category hint at most.
  * Example: “Electronics trending”.

This makes mastery feel like intel power.

It does not change core odds by itself.

If “trending” weights exist, the server must own them.

### 6.8 UX requirements (feedback beats)

Minimum feedback:

* When Static tiers update:
  * Global Feed message: `STATIC SHIFT: <Zone> now HIGH`.
* Zone selector updates live.
* When a crate drops in a hot zone:
  * The drop toast includes: `HOT ZONE BONUS`.
* In the Lab:
  * Show the source zone and applied penalty on the crate card.

### 6.9 Edge cases + integrity constraints

* Offline gains:
  * If auto-dig produces crates offline, store the zone static tier at award time.
  * Do not “retroactively” apply new tiers later.
* If a zone is locked (permit / Total Level):
  * Do not show heatmap.
* If Survey buff expires mid-session:
  * Only crates found after expiry lose the mitigation.
* If events also modify extraction or stability:
  * Multiply or add in a single canonical order.
  * Keep clamps (`95%` crate, `1%` min stability).

### 6.10 Telemetry (for tuning)

Track:

* Zone selection distribution by tier.
* Crates/hour delta for MED/HIGH vs LOW.
* Shatter rate delta for MED/HIGH sourced crates.
* Survey usage rate and its impact on shatters.
* Oracle usage:
  * How often players open the Trend Sight panel.
  * Zone switches after reading trends.

Use this to tune:

* Tier thresholds (50/35/15).
* Bonus values (`+1%`, `+2%`).
* Penalty values (`-2.5%`, `-5%`).
* Survey duration and cooldown.
