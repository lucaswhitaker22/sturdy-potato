# 5. "Shatter Salvage" (The Reaction Beat)

## "Shatter Salvage" (The Reaction Beat)

Shatter Salvage makes failures feel interactive.

It adds a 1-second reaction window when a Sift shatters.

It sits on top of the existing Shatter rules in [2: The Mechanics](../../game-overview/2-the-mechanics/).

### 5.1 Design goals

* Turn “I lost it” into a skill beat.
* Add tension without changing Lab success odds.
* Make Fine Dust failures feel less dead.
* Make rare Cursed Fragments feel “snatched from the wreck”.

Non-goals:

* Do not prevent Shatters.
* Do not change Stability % or stage success rates.
* Do not bypass the Lab overheat cooldown on Critical Fail.
* Do not add a new currency.

### 5.2 Where it lives (UI + state)

Shatter Salvage lives in \[02] THE LAB.

It triggers only on a Sift **failure**.

Required UI:

* A “System Error” failure beat (already exists in canon).
* A floating **SALVAGE** icon/button that appears for `1.0s`.
* A fast countdown ring or shrinking bar.
* Clear success/miss text:
  * `SALVAGED`
  * `MISSED`

Authority rules:

* The server decides whether a salvage window opens.
* The server decides whether the click was in time.
* Rewards are granted server-side only.

### 5.3 When it triggers (failure types)

The Lab has two failure severities in canon:

* **Standard Fail**: grants Fine Dust.
* **Critical Fail**: grants 0 materials and triggers overheat cooldown.

Shatter Salvage triggers on:

* Standard Fail only.

It does not trigger on Critical Fail.

That keeps “overheat” as the hard punish.

### 5.4 Player flow (one failure)

1. Player clicks \[SIFT].
2. The Sift fails (Standard Fail).
3. The “System Error” glitch fires.
4. A **SALVAGE** icon appears for `1.0s`.
5. Player clicks SALVAGE (or presses a bound key).
6. The server resolves:
   * In time → grant salvage reward.
   * Too late → grant normal failure payout.

### 5.5 Rewards (what salvage actually gives)

Shatter Salvage never changes the success/fail roll.

It only modifies the **failure payout**.

#### Stage 1–2: Fine Dust boost

On Stage `1–2` Standard Fail:

* Roll Fine Dust payout as normal.
* If salvage succeeds, double it.

Example:

* Base: `7` Fine Dust
* Salvaged: `14` Fine Dust

Hard rule:

* This does not apply to Stage 0 (it cannot fail).

#### Stage 3+: “catch” the Cursed Fragment

Canon says Stage `3+` shatters can drop a **Cursed Fragment**.

Keep that rarity intact.

Rule:

* Roll the Cursed Fragment chance exactly as normal on Stage `3+` shatter.
* If a fragment was rolled:
  * Salvage success grants `+1` Cursed Fragment.
  * Salvage miss grants `0` fragments (it was lost in the break).

This makes fragments feel earned.

It does not inflate fragment supply.

Optional (tuning lever):

* If this feels too rare in playtests, increase the Stage `3+` fragment roll.
* Document the new base chance in [2: The Mechanics](../../game-overview/2-the-mechanics/).

### 5.6 Input rules and anti-cheese

Input rules:

* Only the first salvage attempt counts.
* The salvage window is `1.0s` from server timestamp.
* Clicking outside the icon counts as “no attempt”.

Anti-cheese:

* The server issues a short-lived `salvage_token` with the failure event.
* The client must include the token in the salvage request.
* Tokens expire exactly when the window closes.

Latency guardrail:

* Allow a small grace window (e.g. `150ms`) after close.
* Measure using server receive time.

### 5.7 Progression integration (Smelting)

Shatter Salvage feeds the Smelting fantasy.

It makes failure create “inputs”, not just pain.

If Smelting specializations exist (see [Skills Expansion](../skills-expansion.md)):

* “Fragment Alchemist” can increase the Stage `3+` fragment roll.
* Or it can extend the salvage window (e.g. `1.0s` → `1.25s`).

Keep the bonus readable.

Avoid hidden math.

### 5.8 UX requirements (feedback beats)

Minimum feedback:

* On window open:
  * A sharp glitch + “SALVAGE NOW” flash.
* On success:
  * A clean “snap” sound.
  * `SALVAGED` stamp text.
  * Reward pops next to the crate card.
* On miss:
  * A dull “crumble” sound.
  * `MISSED` fades fast.

### 5.9 Accessibility and anti-frustration

* Support keyboard input for SALVAGE.
* Support “Reduced Motion”.
  * Replace heavy glitch with a simple flash.
* Never stack multiple reaction windows.
  * If multiple shatters happen quickly, queue the UI beats.

### 5.10 Edge cases + integrity constraints

* If the player swaps tabs mid-failure:
  * Treat as “miss”.
  * Still grant normal failure payout.
* If the player disconnects mid-window:
  * Treat as “miss”.
  * Resolve server-side.
* If the client spams attempts:
  * Ignore after the first.
* If the failure is Critical Fail:
  * No salvage window.
  * No materials.

### 5.11 Telemetry (for tuning)

Track:

* Salvage window open rate per Sift.
* Attempt rate (attempts / windows).
* Success rate (success / attempts).
* Fine Dust delta from salvage.
* Cursed Fragment “rolled vs recovered” counts.

Use this to tune:

* Window duration (`1.0s`).
* Icon size and placement.
* Any Smelting synergy (chance vs time window).
